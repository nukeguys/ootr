entities:
  WardrobeItem:
    props:
      id: string
      name: string
      category: "'base_top' | 'outer' | 'bottom' | 'accessory'"
      properties: string[]
    rules:
      - '아이템 목록은 wardrobe.ts에 하드코딩 — 조합 수정 시 해당 파일만 편집'
      - '기모 하프 집업은 반팔 티셔츠 위에만 착용 (상의 프리셋에서 강제)'
    status: confirmed

  OutfitSet:
    props:
      top: string[]
      bottom: string[]
      accessories: string[]
    rules:
      - '상의/하의/액세서리 3가지 카테고리로 구성'
      - '각 카테고리에 여러 아이템이 있을 수 있으며, UI에서 쉼표(,)로 구분하여 표시'
    status: confirmed

  Recommendation:
    props:
      outfitSet: OutfitSet
      reason: string
      warnings: string[]
      isExtremeWeather: boolean
      createdAt: number
    rules:
      - '추천 이유를 자연어로 함께 표시'
      - 'feelsLike ≥ 30 또는 feelsLike < -10 이면 isExtremeWeather = true'
      - 'precipitation > 3mm 이면 강한 비/눈 경고 추가'
      - '마지막 추천 시간 항상 표시'
    status: confirmed

  RecommendationEngine:
    rules:
      - '상의: topPresets 배열에서 조건이 일치하는 첫 번째 프리셋 선택, combos 중 랜덤 1개'
      - |
        상의 프리셋 (우선순위 순, 다중 후보):
          hot: 싱글렛/반팔 (feelsLike ≥ 25, wind ≤ 5, 강수 없음)
          warm-wind: 반팔+바람막이 (feelsLike ≥ 20, wind > 5 OR 강수)
          warm: 싱글렛/반팔 (feelsLike ≥ 20)
          mild-wind: 긴팔+바람막이/하프집업+바람막이 (feelsLike ≥ 12, wind > 5 OR 강수)
          mild: 긴팔/하프집업 (feelsLike ≥ 12)
          cool-wind: 하프집업+바람막이/긴팔+바람막이 (feelsLike ≥ 5, wind > 5 OR 강수)
          cool: 하프집업/기모하프집업/긴팔+바람막이 (feelsLike ≥ 5)
          cold-wind: 기모하프집업+바람막이/하프집업+바람막이 (feelsLike ≥ 0, wind > 5 OR 강수)
          cold: 기모하프집업/긴팔+바람막이/기모하프집업+바람막이 (feelsLike ≥ 0)
          very-cold-wind: 반팔+기모+바람막이/기모+바람막이 (feelsLike ≥ -4, wind > 5 OR 강수)
          very-cold: 기모+바람막이/하프집업+바람막이 (feelsLike ≥ -4)
          extreme-cold: 반팔+기모+바람막이/긴팔+패딩 조끼+바람막이/하프집업+패딩 조끼+바람막이 (feelsLike ≥ -8)
          extreme-cold-deep: 기모+패딩 조끼+바람막이/반팔+기모+패딩 조끼+바람막이 (fallback)
      - |
        하의 선택:
          feelsLike ≥ 10: 쇼츠 (강풍 오버라이드: wind > 5 AND feelsLike < 13 → 긴바지)
          -4 ≤ feelsLike < 10: 긴바지
          feelsLike < -4: 기모 바지
      - |
        악세서리 (조건별 누적):
          feelsLike < -5: 마스크
          feelsLike < -4: 두꺼운 장갑
          0 ≤ feelsLike < 10: 장갑
          isDay AND uvIndex > 3: 모자 + 선글라스
          야간(!isDay): 반사 장비
    status: confirmed

relationships:
  - { from: RecommendationEngine, to: WardrobeItem, type: references, card: 'N:M' }
  - { from: RecommendationEngine, to: Recommendation, type: produces, card: '1:1' }
  - { from: Recommendation, to: OutfitSet, type: references, card: 'N:1' }
